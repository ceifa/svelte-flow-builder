var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function c(t){return"function"==typeof t}function r(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function i(e,n,o){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const o=e.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}(n,o))}function l(t,e){t.appendChild(e)}function s(t,e,n){t.insertBefore(e,n||null)}function u(t){t.parentNode.removeChild(t)}function f(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function a(t){return document.createElement(t)}function d(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function p(t){return document.createTextNode(t)}function h(){return p(" ")}function x(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function y(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function g(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}let $,m;function b(){if(void 0===$){$=!1;try{"undefined"!=typeof window&&window.parent&&window.parent.document}catch(t){$=!0}}return $}function w(t,e,n){t.classList[n?"add":"remove"](e)}function k(t){m=t}function v(){const t=function(){if(!m)throw new Error("Function called outside component initialization");return m}();return(e,n)=>{const o=t.$$.callbacks[e];if(o){const c=function(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}(e,n);o.slice().forEach(e=>{e.call(t,c)})}}}const I=[],_=[],E=[],B=[],S=Promise.resolve();let z=!1;function W(t){E.push(t)}let A=!1;const C=new Set;function N(){if(!A){A=!0;do{for(let t=0;t<I.length;t+=1){const e=I[t];k(e),j(e.$$)}for(I.length=0;_.length;)_.pop()();for(let t=0;t<E.length;t+=1){const e=E[t];C.has(e)||(C.add(e),e())}E.length=0}while(I.length);for(;B.length;)B.pop()();z=!1,A=!1,C.clear()}}function j(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(W)}}const O=new Set;let M;function H(){M={r:0,c:[],p:M}}function L(){M.r||o(M.c),M=M.p}function Y(t,e){t&&t.i&&(O.delete(t),t.i(e))}function P(t,e,n,o){if(t&&t.o){if(O.has(t))return;O.add(t),M.c.push(()=>{O.delete(t),o&&(n&&t.d(1),o())}),t.o(e)}}function T(t){t&&t.c()}function q(t,n,r){const{fragment:i,on_mount:l,on_destroy:s,after_update:u}=t.$$;i&&i.m(n,r),W(()=>{const n=l.map(e).filter(c);s?s.push(...n):o(n),t.$$.on_mount=[]}),u.forEach(W)}function D(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function F(t,e){-1===t.$$.dirty[0]&&(I.push(t),z||(z=!0,S.then(N)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function X(e,c,r,i,l,s,f=[-1]){const a=m;k(e);const d=c.props||{},p=e.$$={fragment:null,ctx:null,props:s,update:t,not_equal:l,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(a?a.$$.context:[]),callbacks:n(),dirty:f};let h=!1;if(p.ctx=r?r(e,d,(t,n,...o)=>{const c=o.length?o[0]:n;return p.ctx&&l(p.ctx[t],p.ctx[t]=c)&&(p.bound[t]&&p.bound[t](c),h&&F(e,t)),n}):[],p.update(),h=!0,o(p.before_update),p.fragment=!!i&&i(p.ctx),c.target){if(c.hydrate){const t=function(t){return Array.from(t.childNodes)}(c.target);p.fragment&&p.fragment.l(t),t.forEach(u)}else p.fragment&&p.fragment.c();c.intro&&Y(e.$$.fragment),q(e,c.target,c.anchor),N()}k(a)}class G{$destroy(){D(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}function J(e){let n,o;return{c(){n=d("polyline"),g(n,"points",o=e[0].x+","+e[0].y+"\n  "+e[0].x+","+e[1].y+"\n  "+e[1].x+","+e[1].y),g(n,"stroke","#52636c"),g(n,"fill","none")},m(t,e){s(t,n,e)},p(t,[e]){3&e&&o!==(o=t[0].x+","+t[0].y+"\n  "+t[0].x+","+t[1].y+"\n  "+t[1].x+","+t[1].y)&&g(n,"points",o)},i:t,o:t,d(t){t&&u(n)}}}function K(t,e,n){let o,c,{blocks:r}=e,{connection:i}=e,{scale:l}=e,{viewBox:s}=e;return t.$set=t=>{"blocks"in t&&n(2,r=t.blocks),"connection"in t&&n(3,i=t.connection),"scale"in t&&n(4,l=t.scale),"viewBox"in t&&n(5,s=t.viewBox)},t.$$.update=()=>{60&t.$$.dirty&&n(0,({start:o,end:c}=(()=>{let t;return t="object"==typeof i.end?{x:i.end.x/l+s.x,y:i.end.y/l+s.y}:{x:r[i.end].x+20,y:r[i.end].y+10},{start:{x:r[i.start].x+20,y:r[i.start].y+10},end:t}})()),o,(n(1,c),n(3,i),n(4,l),n(5,s),n(2,r)))},[o,c,r,i,l,s]}class Q extends G{constructor(t){super(),X(this,t,K,J,r,{blocks:2,connection:3,scale:4,viewBox:5})}}const R=[];const U=function(e,n=t){let o;const c=[];function i(t){if(r(e,t)&&(e=t,o)){const t=!R.length;for(let t=0;t<c.length;t+=1){const n=c[t];n[1](),R.push(n,e)}if(t){for(let t=0;t<R.length;t+=2)R[t][0](R[t+1]);R.length=0}}}return{set:i,update:function(t){i(t(e))},subscribe:function(r,l=t){const s=[r,l];return c.push(s),1===c.length&&(o=n(i)||t),r(e),()=>{const t=c.indexOf(s);-1!==t&&c.splice(t,1),0===c.length&&(o(),o=null)}}}}([]);function V(e){let n,c,r,i,l,f,a;return{c(){n=h(),c=d("circle"),g(c,"cx",r=e[0].x+20),g(c,"cy",i=e[0].y+20),g(c,"r",l=2),g(c,"fill","#17d0d9"),g(c,"class","svelte-yostbx")},m(t,o){s(t,n,o),s(t,c,o),f||(a=[x(document.body,"pointermove",e[2]),x(document.body,"pointerup",e[3]),x(c,"pointerdown",y(e[1]))],f=!0)},p(t,[e]){1&e&&r!==(r=t[0].x+20)&&g(c,"cx",r),1&e&&i!==(i=t[0].y+20)&&g(c,"cy",i)},i:t,o:t,d(t){t&&u(n),t&&u(c),f=!1,o(a)}}}function Z(t,e,n){let{block:o}=e,{blockId:c}=e,r=!1;return t.$set=t=>{"block"in t&&n(0,o=t.block),"blockId"in t&&n(4,c=t.blockId)},[o,()=>{r=!0},t=>{r&&U.update(e=>[...e.filter(t=>!t.temp),{start:c,end:{x:t.x,y:t.y},temp:!0}])},async t=>{r=!1,setTimeout(()=>{U.update(t=>[...t.filter(t=>!t.temp)])},1)},c]}class tt extends G{constructor(t){super(),X(this,t,Z,V,r,{block:0,blockId:4})}}function et(t){let e,n,c,r,i,f,a,h,$,m,b,k,v=t[0].name+"";return $=new tt({props:{blockId:t[1],block:t[0]}}),{c(){e=d("g"),n=d("rect"),i=d("text"),f=p(v),T($.$$.fragment),g(n,"x",c=t[0].x),g(n,"y",r=t[0].y),g(n,"width","40px"),g(n,"height","20px"),g(n,"rx","1"),g(n,"ry","1"),g(n,"class","svelte-11lhf0d"),w(n,"selected",t[2]),g(i,"x",a=t[0].x+20),g(i,"y",h=t[0].y+10+2),g(i,"font-family","Nunito Sans,Helvetica,sans-serif"),g(i,"font-size","4"),g(i,"fill","#607b99"),g(i,"class","svelte-11lhf0d"),g(e,"class","svelte-11lhf0d")},m(o,c){s(o,e,c),l(e,n),l(e,i),l(i,f),q($,e,null),m=!0,b||(k=[x(e,"pointermove",t[6]),x(e,"pointerdown",y(t[4])),x(e,"pointerup",t[3]),x(e,"pointerleave",t[5])],b=!0)},p(t,[e]){(!m||1&e&&c!==(c=t[0].x))&&g(n,"x",c),(!m||1&e&&r!==(r=t[0].y))&&g(n,"y",r),4&e&&w(n,"selected",t[2]),(!m||1&e)&&v!==(v=t[0].name+"")&&function(t,e){e=""+e,t.data!==e&&(t.data=e)}(f,v),(!m||1&e&&a!==(a=t[0].x+20))&&g(i,"x",a),(!m||1&e&&h!==(h=t[0].y+10+2))&&g(i,"y",h);const o={};2&e&&(o.blockId=t[1]),1&e&&(o.block=t[0]),$.$set(o)},i(t){m||(Y($.$$.fragment,t),m=!0)},o(t){P($.$$.fragment,t),m=!1},d(t){t&&u(e),D($),b=!1,o(k)}}}function nt(t,e,n){let{block:o}=e,{blockId:c}=e,{isSelected:r}=e,{scale:i}=e;const l=v();let s={},u={},f={};return t.$set=t=>{"block"in t&&n(0,o=t.block),"blockId"in t&&n(1,c=t.blockId),"isSelected"in t&&n(2,r=t.isSelected),"scale"in t&&n(7,i=t.scale)},[o,c,r,()=>{r&&l("select",!1),U.update(t=>[...t.map(t=>(t.temp&&(t.temp=!1,t.end=c),t))])},t=>{l("select",!0),s={x:t.x,y:t.y},f={...o}},()=>{r&&l("select",!1)},t=>{if(r){u={x:t.x,y:t.y};const e=(s.x-u.x)/i,c=(s.y-u.y)/i;n(0,o.x=f.x-e,o),n(0,o.y=f.y-c,o)}},i]}class ot extends G{constructor(t){super(),X(this,t,nt,et,r,{block:0,blockId:1,isSelected:2,scale:7})}}function ct(t,e,n){const o=t.slice();return o[19]=e[n][0],o[20]=e[n][1],o}function rt(t,e,n){const o=t.slice();return o[23]=e[n],o}function it(t){let e,n;return e=new Q({props:{blocks:t[0],connection:t[23],scale:t[5],viewBox:t[3]}}),{c(){T(e.$$.fragment)},m(t,o){q(e,t,o),n=!0},p(t,n){const o={};1&n&&(o.blocks=t[0]),64&n&&(o.connection=t[23]),32&n&&(o.scale=t[5]),8&n&&(o.viewBox=t[3]),e.$set(o)},i(t){n||(Y(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function lt(t){let e,n;return e=new ot({props:{block:t[20],blockId:t[19],scale:t[5],isSelected:t[19]===t[1]}}),e.$on("select",(function(...e){return t[13](t[19],...e)})),{c(){T(e.$$.fragment)},m(t,o){q(e,t,o),n=!0},p(n,o){t=n;const c={};1&o&&(c.block=t[20]),1&o&&(c.blockId=t[19]),32&o&&(c.scale=t[5]),3&o&&(c.isSelected=t[19]===t[1]),e.$set(c)},i(t){n||(Y(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function st(t){let e,n,c,r,i,h,y,$,m=t[6],k=[];for(let e=0;e<m.length;e+=1)k[e]=it(rt(t,m,e));const v=t=>P(k[t],1,1,()=>{k[t]=null});let I=Object.entries(t[0]),_=[];for(let e=0;e<I.length;e+=1)_[e]=lt(ct(t,I,e));const E=t=>P(_[t],1,1,()=>{_[t]=null});return{c(){e=a("div"),n=d("svg");for(let t=0;t<k.length;t+=1)k[t].c();c=p("");for(let t=0;t<_.length;t+=1)_[t].c();g(n,"viewBox",r=`${t[3].x} ${t[3].y} ${t[3].w} ${t[3].h}`),g(n,"class","svelte-1a6t3rt"),w(n,"dragging",t[4]),g(e,"class","svelte-1a6t3rt"),W(()=>t[14].call(e))},m(o,r){s(o,e,r),l(e,n);for(let t=0;t<k.length;t+=1)k[t].m(n,null);l(n,c);for(let t=0;t<_.length;t+=1)_[t].m(n,null);i=function(t,e){const n=getComputedStyle(t),o=(parseInt(n.zIndex)||0)-1;"static"===n.position&&(t.style.position="relative");const c=a("iframe");c.setAttribute("style",`display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: ${o};`),c.setAttribute("aria-hidden","true"),c.tabIndex=-1;const r=b();let i;return r?(c.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",i=x(window,"message",t=>{t.source===c.contentWindow&&e()})):(c.src="about:blank",c.onload=()=>{i=x(c.contentWindow,"resize",e)}),l(t,c),()=>{(r||i&&c.contentWindow)&&i(),u(c)}}(e,t[14].bind(e)),h=!0,y||($=[x(n,"pointermove",t[9]),x(n,"pointerdown",t[8]),x(n,"pointerup",t[7]),x(n,"pointerleave",t[10]),x(n,"wheel",t[11],{passive:!0})],y=!0)},p(t,[e]){if(105&e){let o;for(m=t[6],o=0;o<m.length;o+=1){const r=rt(t,m,o);k[o]?(k[o].p(r,e),Y(k[o],1)):(k[o]=it(r),k[o].c(),Y(k[o],1),k[o].m(n,c))}for(H(),o=m.length;o<k.length;o+=1)v(o);L()}if(4131&e){let o;for(I=Object.entries(t[0]),o=0;o<I.length;o+=1){const c=ct(t,I,o);_[o]?(_[o].p(c,e),Y(_[o],1)):(_[o]=lt(c),_[o].c(),Y(_[o],1),_[o].m(n,null))}for(H(),o=I.length;o<_.length;o+=1)E(o);L()}(!h||8&e&&r!==(r=`${t[3].x} ${t[3].y} ${t[3].w} ${t[3].h}`))&&g(n,"viewBox",r),16&e&&w(n,"dragging",t[4])},i(t){if(!h){for(let t=0;t<m.length;t+=1)Y(k[t]);for(let t=0;t<I.length;t+=1)Y(_[t]);h=!0}},o(t){k=k.filter(Boolean);for(let t=0;t<k.length;t+=1)P(k[t]);_=_.filter(Boolean);for(let t=0;t<_.length;t+=1)P(_[t]);h=!1},d(t){t&&u(e),f(k,t),f(_,t),i(),y=!1,o($)}}}function ut(t,e,n){let o;i(t,U,t=>n(6,o=t));let c,r,l,{blocks:s}=e,u=void 0,f={x:0,y:0,w:window.innerWidth,h:window.innerHeight},a={},d=!1;const p=t=>{n(1,u=t)};let h;return t.$set=t=>{"blocks"in t&&n(0,s=t.blocks)},t.$$.update=()=>{8&t.$$.dirty&&n(5,h=window.innerWidth/f.w)},[s,u,c,f,d,h,o,t=>{d&&n(4,d=!1)},t=>{n(1,u=void 0),r={x:t.x,y:t.y},a={...f},n(4,d=!0)},t=>{if(d){l={x:t.x,y:t.y};const e=(r.x-l.x)/h,o=(r.y-l.y)/h;n(3,f.x=a.x+e,f),n(3,f.y=a.y+o,f)}},()=>{n(4,d=!1)},t=>{if(d)return;const e=t.offsetX,o=t.offsetY,c=f.w*Math.sign(t.deltaY)*.05,r=f.h*Math.sign(t.deltaY)*.05,i=c*e/window.innerWidth,l=r*o/window.innerHeight;n(3,f={x:f.x+i,y:f.y+l,w:f.w-c,h:f.h-r})},p,(t,{detail:e})=>p(e?t:void 0),function(){c=this.clientWidth,n(2,c)}]}class ft extends G{constructor(t){super(),X(this,t,ut,st,r,{blocks:0})}}function at(t){let e,n,o,c,r,i,f;return c=new ft({props:{blocks:t[0]}}),{c(){e=a("main"),n=a("button"),n.textContent="+",o=h(),T(c.$$.fragment),g(n,"class","svelte-6hblzt"),g(e,"class","svelte-6hblzt")},m(u,a){s(u,e,a),l(e,n),l(e,o),q(c,e,null),r=!0,i||(f=x(n,"click",t[1]),i=!0)},p(t,[e]){const n={};1&e&&(n.blocks=t[0]),c.$set(n)},i(t){r||(Y(c.$$.fragment,t),r=!0)},o(t){P(c.$$.fragment,t),r=!1},d(t){t&&u(e),D(c),i=!1,f()}}}function dt(t,e,n){let o={};return[o,()=>{n(0,o={...o,[Date.now()]:{name:"New block",x:60,y:60}})}]}return new class extends G{constructor(t){super(),X(this,t,dt,at,r,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
